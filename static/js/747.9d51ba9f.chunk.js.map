{"version":3,"file":"static/js/747.9d51ba9f.chunk.js","mappings":"oMACA,EAA0B,0B,SCe1B,EAZsD,SAAC,GAAe,IAAdA,EAAa,EAAbA,QACpD,OACI,iBAAKC,UAAWC,EAAhB,WACI,gBAAKC,IAAKH,EAAQI,MAAOC,IAAI,GAAGC,MAAO,CAACC,MAAO,WAC/C,uBAAIP,EAAQQ,YACZ,kBACCR,EAAQA,SACT,sBCWZ,EAlB0D,SAAC,GAAiB,IAAhBS,EAAe,EAAfA,UACxD,GAAgCC,EAAAA,EAAAA,UAA4B,IAA5D,eAAOC,EAAP,KAAiBC,EAAjB,KAUA,OATAC,EAAAA,EAAAA,YAAU,WACN,IAAMC,EAAiB,SAACC,GACpBH,GAAY,SAACI,GAAD,wBAAsBA,IAAtB,OAAuCC,KAAKC,MAAMH,EAAEI,YAGpE,OADS,OAATV,QAAS,IAATA,GAAAA,EAAWW,iBAAiB,UAAWN,GAChC,WACM,OAATL,QAAS,IAATA,GAAAA,EAAWY,oBAAoB,UAAWP,MAE/C,CAACL,KAEA,gBAAKH,MAAO,CAACgB,OAAQ,QAASC,UAAW,QAAzC,SACKZ,EAASa,KAAI,SAACC,EAAoBC,GAArB,OAAuC,SAAC,EAAD,CAAS1B,QAASyB,GAAQC,S,UCc3F,EA5BiE,SAAC,GAAiB,IAAhBjB,EAAe,EAAfA,UAC/D,GAA8BC,EAAAA,EAAAA,UAAS,IAAvC,eAAOV,EAAP,KAAgB2B,EAAhB,KACA,GAAsCjB,EAAAA,EAAAA,UAA8B,WAApE,eAAOkB,EAAP,KAAoBC,EAApB,MAEAhB,EAAAA,EAAAA,YAAU,WACN,IAAMiB,EAAc,WAChBD,EAAe,UAGnB,OADS,OAATpB,QAAS,IAATA,GAAAA,EAAWW,iBAAiB,OAAQU,GAC7B,WACM,OAATrB,QAAS,IAATA,GAAAA,EAAWY,oBAAoB,OAAQS,MAE5C,CAACrB,IAQJ,OACI,4BACI,qBAAUsB,SAAU,SAAChB,GAAD,OAAOY,EAAWZ,EAAEiB,cAAcC,QAAQA,MAAOjC,KACrE,mBAAQkC,SAAwB,OAAdzB,GAAsC,UAAhBmB,EAAyBO,QATrD,WACXnC,IAEI,OAATS,QAAS,IAATA,GAAAA,EAAW2B,KAAKpC,GAChB2B,EAAW,MAKP,UAAuF,SAACU,EAAA,EAAD,UCYnG,EAlCuB,WACnB,OAAkC3B,EAAAA,EAAAA,UAA2B,MAA7D,eAAOD,EAAP,KAAkB6B,EAAlB,KAyBA,OAxBAzB,EAAAA,EAAAA,YAAU,WACN,IAAI0B,EACEC,EAAe,WACjBC,WAAWC,EAAe,MAExBA,EAAgB,WAAO,IAAD,IACtB,QAAF,EAAAH,SAAA,SAAIlB,oBAAoB,QAASmB,GAC/B,QAAF,EAAAD,SAAA,SAAII,SACJJ,EAAK,IAAIK,UAAU,iEAChBxB,iBAAiB,QAASoB,GAC7BF,EAAaC,IAIjB,OAFAG,IAEO,WACHH,EAAGlB,oBAAoB,QAASmB,GAChCD,EAAGI,WAER,KAEH9B,EAAAA,EAAAA,YAAU,cAEP,CAACJ,KAGA,4BACI,SAAC,EAAD,CAAUA,UAAWA,KACrB,SAAC,EAAD,CAAiBA,UAAWA,Q,oBCpBxC,EAP2B,WACvB,IAAMoC,GAASC,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAyBA,EAAMC,KAAKH,UAC/D,OAAO,8BACDA,GAAqC,SAAC,EAAD,KAA5B,SAAC,KAAD,CAAUI,GAAI,e,yBCP7BC,EAAyBC,EAAQ,MAIrCC,EAAQ,OAAU,EAClB,IAAIC,EAAiBH,EAAuBC,EAAQ,OAChDG,EAAcH,EAAQ,KACtBI,GAAW,EAAIF,EAAeG,UAAuB,EAAIF,EAAYG,KAAK,OAAQ,CACpFC,EAAG,0CACD,QACJN,EAAQ,EAAUG","sources":["webpack://react-kabzda-1/./src/components/ChatPage/ChatPage.module.css?e0ec","components/ChatPage/Chat/Messages/Message/Message.tsx","components/ChatPage/Chat/Messages/Messages.tsx","components/ChatPage/Chat/SendMessageForm/SendMessageForm.tsx","components/ChatPage/Chat/Chat.tsx","components/ChatPage/ChatPage.tsx","../node_modules/@mui/icons-material/Send.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"message\":\"ChatPage_message__XS+ov\"};","import React from 'react';\r\nimport s from '../../../ChatPage.module.css'\r\nimport {ChatMessageType} from \"../../../../../api/chat-api\";\r\n\r\nconst Message: React.FC<{message: ChatMessageType}> = ({message}) => {\r\n    return (\r\n        <div className={s.message}>\r\n            <img src={message.photo} alt=\"\" style={{width: \"30px\"}}/>\r\n            <b>{message.userName}</b>\r\n            <br/>\r\n            {message.message}\r\n            <hr/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Message;","import React, {useEffect, useState} from 'react';\r\nimport Message from \"./Message/Message\";\r\nimport {ChatMessageType} from \"../../../../api/chat-api\";\r\n\r\nconst Messages: React.FC<{wsChannel: WebSocket | null}> = ({wsChannel}) => {\r\n    const [messages, setMessages] = useState<ChatMessageType[]>([]);\r\n    useEffect(() => {\r\n        const messageHandler = (e: MessageEvent) => {\r\n            setMessages((prevMessages) => [...prevMessages, ...JSON.parse(e.data)]);\r\n        };\r\n        wsChannel?.addEventListener('message', messageHandler);\r\n        return () => {\r\n            wsChannel?.removeEventListener('message', messageHandler);\r\n        }\r\n    }, [wsChannel]);\r\n    return (\r\n        <div style={{height: \"400px\", overflowY: \"auto\"}}>\r\n            {messages.map((m: ChatMessageType, index: number) => <Message message={m} key={index}/>)}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Messages;","import React, {useEffect, useState} from 'react';\r\nimport SendIcon from '@mui/icons-material/Send';\r\n\r\nconst SendMessageForm: React.FC<{wsChannel: WebSocket | null}> = ({wsChannel}) => {\r\n    const [message, setMessage] = useState(\"\");\r\n    const [readyStatus, setReadyStatus] = useState<'pending' | 'ready'>('pending');\r\n\r\n    useEffect(() => {\r\n        const openHandler = () => {\r\n            setReadyStatus('ready')\r\n        };\r\n        wsChannel?.addEventListener('open', openHandler)\r\n        return () => {\r\n            wsChannel?.removeEventListener('open', openHandler)\r\n        }\r\n    }, [wsChannel])\r\n\r\n    const sendMessage = () => {\r\n        if (!message)\r\n            return;\r\n        wsChannel?.send(message);\r\n        setMessage(\"\");\r\n    }\r\n    return (\r\n        <div>\r\n            <textarea onChange={(e) => setMessage(e.currentTarget.value)} value={message}></textarea>\r\n            <button disabled={wsChannel === null || readyStatus !== 'ready'} onClick={sendMessage}><SendIcon /></button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SendMessageForm;","import React, {useEffect, useState} from 'react';\r\nimport Messages from \"./Messages/Messages\";\r\nimport SendMessageForm from \"./SendMessageForm/SendMessageForm\";\r\n\r\nconst Chat: React.FC = () => {\r\n    const [wsChannel, setWsChannel] = useState<WebSocket | null>(null);\r\n    useEffect(() => {\r\n        let ws: WebSocket;\r\n        const closeHandler = () => {\r\n            setTimeout(createChannel, 3000);\r\n        }\r\n        const createChannel = () => {\r\n            ws?.removeEventListener('close', closeHandler);\r\n            ws?.close();\r\n            ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx');\r\n            ws.addEventListener('close', closeHandler);\r\n            setWsChannel(ws);\r\n        }\r\n        createChannel();\r\n\r\n        return () => {\r\n            ws.removeEventListener('close', closeHandler);\r\n            ws.close();\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n\r\n    }, [wsChannel])\r\n\r\n    return (\r\n        <div>\r\n            <Messages wsChannel={wsChannel}/>\r\n            <SendMessageForm wsChannel={wsChannel}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Chat;","import React from 'react';\r\nimport Chat from \"./Chat/Chat\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {AppStateType} from \"../../redux/store\";\r\nimport {Navigate} from \"react-router-dom\";\r\n\r\nconst ChatPage: React.FC = () => {\r\n    const isAuth = useSelector((state: AppStateType) => state.auth.isAuth);\r\n    return <>\r\n        {!isAuth ? <Navigate to={'/login'}/> : <Chat />}\r\n    </>\r\n};\r\n\r\nexport default ChatPage;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z\"\n}), 'Send');\nexports.default = _default;"],"names":["message","className","s","src","photo","alt","style","width","userName","wsChannel","useState","messages","setMessages","useEffect","messageHandler","e","prevMessages","JSON","parse","data","addEventListener","removeEventListener","height","overflowY","map","m","index","setMessage","readyStatus","setReadyStatus","openHandler","onChange","currentTarget","value","disabled","onClick","send","Send","setWsChannel","ws","closeHandler","setTimeout","createChannel","close","WebSocket","isAuth","useSelector","state","auth","to","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d"],"sourceRoot":""}