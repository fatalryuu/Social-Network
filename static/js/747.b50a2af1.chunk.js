"use strict";(self.webpackChunkreact_kabzda_1=self.webpackChunkreact_kabzda_1||[]).push([[747],{1747:function(e,n,t){t.r(n),t.d(n,{default:function(){return f}});var s=t(2791),r=t(9439),a=t(3433),u="ChatPage_message__aNBdK",i=t(184),o=function(e){var n=e.message;return(0,i.jsxs)("div",{className:u,children:[(0,i.jsx)("img",{src:n.photo,alt:"",style:{width:"30px"}}),(0,i.jsx)("b",{children:n.userName}),(0,i.jsx)("br",{}),n.message,(0,i.jsx)("hr",{})]})},c=function(e){var n=e.wsChannel,t=(0,s.useState)([]),u=(0,r.Z)(t,2),c=u[0],l=u[1];return(0,s.useEffect)((function(){var e=function(e){l((function(n){return[].concat((0,a.Z)(n),(0,a.Z)(JSON.parse(e.data)))}))};return null===n||void 0===n||n.addEventListener("message",e),function(){null===n||void 0===n||n.removeEventListener("message",e)}}),[n]),(0,i.jsx)("div",{style:{height:"400px",overflowY:"auto"},children:c.map((function(e,n){return(0,i.jsx)(o,{message:e},n)}))})},l=t(1686),d=function(e){var n=e.wsChannel,t=(0,s.useState)(""),a=(0,r.Z)(t,2),u=a[0],o=a[1],c=(0,s.useState)("pending"),d=(0,r.Z)(c,2),v=d[0],f=d[1];(0,s.useEffect)((function(){var e=function(){f("ready")};return null===n||void 0===n||n.addEventListener("open",e),function(){null===n||void 0===n||n.removeEventListener("open",e)}}),[n]);return(0,i.jsxs)("div",{children:[(0,i.jsx)("textarea",{onChange:function(e){return o(e.currentTarget.value)},value:u}),(0,i.jsx)("button",{disabled:null===n||"ready"!==v,onClick:function(){u&&(null===n||void 0===n||n.send(u),o(""))},children:(0,i.jsx)(l.Z,{})})]})},v=function(){var e=(0,s.useState)(null),n=(0,r.Z)(e,2),t=n[0],a=n[1];return(0,s.useEffect)((function(){var e,n=function(){setTimeout(t,3e3)},t=function(){var t,s;null===(t=e)||void 0===t||t.removeEventListener("close",n),null===(s=e)||void 0===s||s.close(),(e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")).addEventListener("close",n),a(e)};return t(),function(){e.removeEventListener("close",n),e.close()}}),[]),(0,s.useEffect)((function(){}),[t]),(0,i.jsxs)("div",{children:[(0,i.jsx)(c,{wsChannel:t}),(0,i.jsx)(d,{wsChannel:t})]})},f=function(){return(0,i.jsx)(v,{})}},1686:function(e,n,t){var s=t(4836);n.Z=void 0;var r=s(t(5649)),a=t(184),u=(0,r.default)((0,a.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");n.Z=u}}]);
//# sourceMappingURL=747.b50a2af1.chunk.js.map