"use strict";(self.webpackChunkreact_kabzda_1=self.webpackChunkreact_kabzda_1||[]).push([[641],{310:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var s=n(1413),r=n(5671),o=n(3144),i=n(9340),a=n(5716),u=n(2791),c=n(885),l="ProfileInfo_profile_info__H3D-z",f="ProfileInfo_avatar__OJq4I",p="ProfileInfo_info__blXPI",d="ProfileInfo_name__adacu",h="ProfileInfo_about__pyyvZ",x="ProfileInfo_job__S9tI2",v=n(1259),j=n(4407),P=n(184),m=function(e){var t=(0,u.useState)(!1),n=(0,c.Z)(t,2),s=n[0],r=n[1],o=(0,u.useState)(e.status),i=(0,c.Z)(o,2),a=i[0],l=i[1];(0,u.useEffect)((function(){l(e.status)}),[e.status]);return(0,P.jsx)("div",{children:s?(0,P.jsx)("div",{children:(0,P.jsx)("input",{onChange:function(e){l(e.currentTarget.value)},autoFocus:!0,value:a.toString(),onBlur:function(){r(!1),e.updateStatus(a)}})}):(0,P.jsx)("div",{children:(0,P.jsx)("span",{onDoubleClick:function(){e.isOwner&&r(!0)},children:e.status?e.status:"No status"})})})},b=n(3896),_=function(e){var t=e.contactTitle,n=e.contactValue,r=e.register;return(0,P.jsxs)("div",{children:[(0,P.jsxs)("b",{children:[t,": "]}),(0,P.jsx)("input",(0,s.Z)({type:"text",defaultValue:n},r("contacts."+t,{required:!1})))]})},g=function(e){var t=e.profile,n=e.setEditMode,r=e.saveProfileInfo,o=(0,b.cI)(),i=o.register,a=o.handleSubmit;return(0,P.jsx)("div",{children:(0,P.jsxs)("form",{onSubmit:a((function(e){e.fullName=t.fullName,r(e).then((function(){return n(!1)}))})),children:[(0,P.jsxs)("div",{className:h,children:[(0,P.jsx)("b",{children:"About me: "}),(0,P.jsx)("input",(0,s.Z)((0,s.Z)({type:"text"},i("aboutMe",{required:!1})),{},{defaultValue:t.aboutMe,onBlur:function(){},placeholder:"About Me"}))]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("b",{children:"Looking for a job: "}),(0,P.jsx)("input",(0,s.Z)({type:"checkbox",defaultChecked:t.lookingForAJob},i("lookingForAJob",{required:!1})))]}),(0,P.jsxs)("div",{className:x,children:[(0,P.jsx)("b",{children:"Soft skills: "}),(0,P.jsx)("input",(0,s.Z)((0,s.Z)({type:"text"},i("lookingForAJobDescription",{required:!1})),{},{defaultValue:t.lookingForAJobDescription,onBlur:function(){},placeholder:"Soft skills"}))]}),Object.keys(t.contacts).map((function(e){return(0,P.jsx)(_,{register:i,contactTitle:e,contactValue:t.contacts[e]},e)})),(0,P.jsx)("button",{children:"Done"})]})})},k=function(e){var t=e.contactTitle,n=e.contactValue;return(0,P.jsx)("div",{children:n?(0,P.jsxs)("div",{children:[(0,P.jsxs)("b",{children:[t,": "]}),(0,P.jsx)("a",{href:n,children:n})]}):null})},S=function(e){var t=e.profile,n=e.isOwner,s=e.goToEditMode;return(0,P.jsxs)(P.Fragment,{children:[n?(0,P.jsx)("button",{onClick:s,children:"edit"}):null,t.aboutMe?(0,P.jsxs)("div",{children:[(0,P.jsx)("b",{children:"About me: "}),(0,P.jsx)("span",{className:h,children:t.aboutMe})]}):null,(0,P.jsxs)("div",{children:[(0,P.jsx)("b",{children:"Looking for a job: "}),t.lookingForAJob?"Yes":"No"]}),t.lookingForAJob?(0,P.jsxs)("div",{className:x,children:[(0,P.jsx)("b",{children:"Soft skills: "}),t.lookingForAJob?t.lookingForAJobDescription:null]}):null,Object.keys(t.contacts).map((function(e){return(0,P.jsx)(k,{contactTitle:e,contactValue:t.contacts[e]},e)}))]})},I=function(e){var t=e.profile,n=e.status,s=e.updateStatus,r=e.isOwner,o=e.savePhoto,i=e.saveProfileInfo,a=(0,u.useState)(!1),h=(0,c.Z)(a,2),x=h[0],b=h[1];if(!t)return(0,P.jsx)(j.Z,{});return(0,P.jsxs)("div",{className:l,children:[(0,P.jsxs)("div",{className:f,children:[(0,P.jsx)("img",{src:null!=t.photos.large?t.photos.large:v,alt:""}),(0,P.jsx)("div",{children:r?(0,P.jsx)("input",{type:"file",onChange:function(e){e.target.files.length&&o(e.target.files[0])}}):null})]}),(0,P.jsxs)("div",{className:p,children:[(0,P.jsx)("div",{className:d,children:t.fullName}),(0,P.jsx)(m,{status:n,updateStatus:s,isOwner:r}),x?(0,P.jsx)(g,{profile:t,setEditMode:b,saveProfileInfo:i}):(0,P.jsx)(S,{profile:t,isOwner:r,goToEditMode:function(){return b(!0)}})]})]})},y=n(5861),Z=n(7757),w=n.n(Z),A=n(6304),N="profile/ADD_POST",C="profile/SET_USER_PROFILE",D="profile/SET_STATUS",T="profile/SAVE_PHOTO_SUCCESS",M=function(e){return{type:D,status:e}},O=function(e){return function(){var t=(0,y.Z)(w().mark((function t(n){var s;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.profileAPI.getProfile(e);case 2:s=t.sent,n({type:C,profile:s});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},F="MyPosts_text__-+Ipi",E="MyPosts_newPost__B4LFh",J="MyPosts_postsBlock__2WPjJ",V="MyPosts_posts__ct9Vp",q="Post_item__qURPC",B=n.p+"static/media/post_avatar.884b5b68052ea553bbb7.png",U=function(e){return(0,P.jsx)("div",{children:(0,P.jsxs)("div",{className:q,children:[(0,P.jsx)("img",{src:B,alt:""}),e.message,(0,P.jsx)("div",{children:(0,P.jsxs)("span",{children:["like count: ",e.likes]})})]})})},L=function(e){var t=e.posts,n=e.addPost,r=(0,b.cI)(),o=r.register,i=r.handleSubmit,a=r.reset,u=t.map((function(e){return(0,P.jsx)(U,{message:e.message,likes:e.likesCount},e.id)}));return(0,P.jsxs)("div",{className:J,children:[(0,P.jsx)("h3",{className:F,children:"My posts"}),(0,P.jsxs)("form",{onSubmit:i((function(e){n(e.post),a()})),children:[(0,P.jsxs)("div",{className:E,children:[(0,P.jsx)("div",{children:(0,P.jsx)("textarea",(0,s.Z)({},o("post",{required:!0})))}),(0,P.jsx)("div",{children:(0,P.jsx)("button",{children:"Add post"})})]}),(0,P.jsx)("div",{className:V,children:u})]})]})},z=n(8687),R=(0,z.$j)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){e(function(e){return{type:N,newPostText:e}}(t))}}}))(L),H=function(e){return(0,P.jsxs)("div",{children:[(0,P.jsx)(I,{isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,savePhoto:e.savePhoto,saveProfileInfo:e.saveProfileInfo}),(0,P.jsx)(R,{})]})},$=n(1623),W=n(7781),X=n(602),Y=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userID;e||(e=27510),this.props.getProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.userID!==e.match.params.userID&&this.refreshProfile()}},{key:"render",value:function(){return(0,P.jsx)(H,(0,s.Z)((0,s.Z)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userID,savePhoto:this.props.savePhoto,saveProfileInfo:this.props.saveProfileInfo}))}}]),n}(u.Component),G=(0,W.qC)((0,z.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status}}),{getProfile:O,getStatus:function(e){return function(){var t=(0,y.Z)(w().mark((function t(n){var s;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.profileAPI.getStatus(e);case 2:s=t.sent,n(M(s));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=(0,y.Z)(w().mark((function t(n){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.profileAPI.updateStatus(e);case 2:0===t.sent.resultCode&&n(M(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=(0,y.Z)(w().mark((function t(n){var s;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.profileAPI.savePhoto(e);case 2:0===(s=t.sent).resultCode&&n((r=s.data.photos,{type:T,photos:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfileInfo:function(e){return function(){var t=(0,y.Z)(w().mark((function t(n,s){var r;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s().auth.userID,t.next=3,A.profileAPI.saveProfileData(e);case 3:0===t.sent.resultCode&&n(O(r));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),X.Z,$.Z)(Y)}}]);
//# sourceMappingURL=641.5ddc8809.chunk.js.map