{"version":3,"file":"static/js/747.9b99a0c0.chunk.js","mappings":"oMACA,EAA0B,0B,SCqB1B,EAZsD,SAAC,GAAe,IAAdA,EAAa,EAAbA,QACpD,OACI,iBAAKC,UAAWC,EAAhB,WACI,gBAAKC,IAAKH,EAAQI,MAAOC,IAAI,GAAGC,MAAO,CAACC,MAAO,WAC/C,uBAAIP,EAAQQ,YACZ,kBACCR,EAAQA,SACT,sBCEZ,EAhB0D,SAAC,GAAiB,IAAhBS,EAAe,EAAfA,UACxD,GAAgCC,EAAAA,EAAAA,UAA4B,IAA5D,eAAOC,EAAP,KAAiBC,EAAjB,KAQA,OAPAC,EAAAA,EAAAA,YAAU,WACG,OAATJ,QAAS,IAATA,GAAAA,EAAWK,iBAAiB,WAAW,SAACC,GAEpCH,GAAY,SAACI,GAAD,wBAAsBA,IAAtB,OAAuCC,KAAKC,MAAMH,EAAEI,gBAErE,CAACV,KAGA,gBAAKH,MAAO,CAACc,OAAQ,QAASC,UAAW,QAAzC,SACKV,EAASW,KAAI,SAACC,EAAoBC,GAArB,OAAuC,SAAC,EAAD,CAASxB,QAASuB,GAAQC,S,UCa3F,EAxBiE,SAAC,GAAiB,IAAhBf,EAAe,EAAfA,UAC/D,GAA8BC,EAAAA,EAAAA,UAAS,IAAvC,eAAOV,EAAP,KAAgByB,EAAhB,KACA,GAAsCf,EAAAA,EAAAA,UAA8B,WAApE,eAAOgB,EAAP,KAAoBC,EAApB,MAEAd,EAAAA,EAAAA,YAAU,WACG,OAATJ,QAAS,IAATA,GAAAA,EAAWK,iBAAiB,QAAQ,WAChCa,EAAe,cAEpB,CAAClB,IAQJ,OACI,4BACI,qBAAUmB,SAAU,SAACb,GAAD,OAAOU,EAAWV,EAAEc,cAAcC,QAAQA,MAAO9B,KACrE,mBAAQ+B,SAA0B,UAAhBL,EAAyBM,QAT/B,WACXhC,IAEI,OAATS,QAAS,IAATA,GAAAA,EAAWwB,KAAKjC,GAChByB,EAAW,MAKP,UAAiE,SAACS,EAAA,EAAD,UCK7E,EAvBuB,WACnB,OAAkCxB,EAAAA,EAAAA,UAA2B,MAA7D,eAAOD,EAAP,KAAkB0B,EAAlB,KAcA,OAbAtB,EAAAA,EAAAA,YAAU,WAEFsB,EAAa,IAAIC,UAAU,mEAGhC,KAEHvB,EAAAA,EAAAA,YAAU,WACG,OAATJ,QAAS,IAATA,GAAAA,EAAWK,iBAAiB,SAAS,WACjCuB,QAAQC,IAAI,cAEjB,CAAC7B,KAGA,4BACI,SAAC,EAAD,CAAUA,UAAWA,KACrB,SAAC,EAAD,CAAiBA,UAAWA,QCbxC,EAN2B,WACvB,OACI,SAAC,EAAD,M,yBCHJ8B,EAAyBC,EAAQ,MAIrCC,EAAQ,OAAU,EAClB,IAAIC,EAAiBH,EAAuBC,EAAQ,OAChDG,EAAcH,EAAQ,KACtBI,GAAW,EAAIF,EAAeG,UAAuB,EAAIF,EAAYG,KAAK,OAAQ,CACpFC,EAAG,0CACD,QACJN,EAAQ,EAAUG","sources":["webpack://react-kabzda-1/./src/components/ChatPage/ChatPage.module.css?e0ec","components/ChatPage/Chat/Messages/Message/Message.tsx","components/ChatPage/Chat/Messages/Messages.tsx","components/ChatPage/Chat/SendMessageForm/SendMessageForm.tsx","components/ChatPage/Chat/Chat.tsx","components/ChatPage/ChatPage.tsx","../node_modules/@mui/icons-material/Send.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"message\":\"ChatPage_message__aNBdK\"};","import React from 'react';\r\nimport s from '../../../ChatPage.module.css'\r\n\r\nexport type ChatMessageType = {\r\n    message: string,\r\n    photo: string,\r\n    userId: number,\r\n    userName: string\r\n}\r\n\r\nconst Message: React.FC<{message: ChatMessageType}> = ({message}) => {\r\n    return (\r\n        <div className={s.message}>\r\n            <img src={message.photo} alt=\"\" style={{width: \"30px\"}}/>\r\n            <b>{message.userName}</b>\r\n            <br/>\r\n            {message.message}\r\n            <hr/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Message;","import React, {useEffect, useState} from 'react';\r\nimport Message, {ChatMessageType} from \"./Message/Message\";\r\n\r\nconst Messages: React.FC<{wsChannel: WebSocket | null}> = ({wsChannel}) => {\r\n    const [messages, setMessages] = useState<ChatMessageType[]>([]);\r\n    useEffect(() => {\r\n        wsChannel?.addEventListener('message', (e: MessageEvent) => {\r\n            debugger\r\n            setMessages((prevMessages) => [...prevMessages, ...JSON.parse(e.data)]);\r\n        })\r\n    }, [wsChannel]);\r\n    debugger\r\n    return (\r\n        <div style={{height: \"400px\", overflowY: \"auto\"}}>\r\n            {messages.map((m: ChatMessageType, index: number) => <Message message={m} key={index}/>)}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Messages;","import React, {useEffect, useState} from 'react';\r\nimport SendIcon from '@mui/icons-material/Send';\r\n\r\nconst SendMessageForm: React.FC<{wsChannel: WebSocket | null}> = ({wsChannel}) => {\r\n    const [message, setMessage] = useState(\"\");\r\n    const [readyStatus, setReadyStatus] = useState<'pending' | 'ready'>('pending');\r\n\r\n    useEffect(() => {\r\n        wsChannel?.addEventListener('open', () => {\r\n            setReadyStatus('ready')\r\n        })\r\n    }, [wsChannel])\r\n\r\n    const sendMessage = () => {\r\n        if (!message)\r\n            return;\r\n        wsChannel?.send(message);\r\n        setMessage(\"\");\r\n    }\r\n    return (\r\n        <div>\r\n            <textarea onChange={(e) => setMessage(e.currentTarget.value)} value={message}></textarea>\r\n            <button disabled={readyStatus !== 'ready'} onClick={sendMessage}><SendIcon /></button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SendMessageForm;","import React, {useEffect, useState} from 'react';\r\nimport Messages from \"./Messages/Messages\";\r\nimport SendMessageForm from \"./SendMessageForm/SendMessageForm\";\r\n\r\nconst Chat: React.FC = () => {\r\n    const [wsChannel, setWsChannel] = useState<WebSocket | null>(null);\r\n    useEffect(() => {\r\n        const createChannel = () => {\r\n            setWsChannel(new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx'));\r\n        }\r\n        createChannel();\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        wsChannel?.addEventListener('close', () => {\r\n            console.log('error')\r\n        })\r\n    }, [wsChannel])\r\n\r\n    return (\r\n        <div>\r\n            <Messages wsChannel={wsChannel}/>\r\n            <SendMessageForm wsChannel={wsChannel}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Chat;","import React from 'react';\r\nimport Chat from \"./Chat/Chat\";\r\n\r\nconst ChatPage: React.FC = () => {\r\n    return (\r\n        <Chat />\r\n    );\r\n};\r\n\r\nexport default ChatPage;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z\"\n}), 'Send');\nexports.default = _default;"],"names":["message","className","s","src","photo","alt","style","width","userName","wsChannel","useState","messages","setMessages","useEffect","addEventListener","e","prevMessages","JSON","parse","data","height","overflowY","map","m","index","setMessage","readyStatus","setReadyStatus","onChange","currentTarget","value","disabled","onClick","send","Send","setWsChannel","WebSocket","console","log","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d"],"sourceRoot":""}