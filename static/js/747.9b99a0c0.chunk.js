"use strict";(self.webpackChunkreact_kabzda_1=self.webpackChunkreact_kabzda_1||[]).push([[747],{1747:function(e,n,t){t.r(n),t.d(n,{default:function(){return h}});var s=t(2791),a=t(9439),r=t(3433),u="ChatPage_message__aNBdK",i=t(184),c=function(e){var n=e.message;return(0,i.jsxs)("div",{className:u,children:[(0,i.jsx)("img",{src:n.photo,alt:"",style:{width:"30px"}}),(0,i.jsx)("b",{children:n.userName}),(0,i.jsx)("br",{}),n.message,(0,i.jsx)("hr",{})]})},o=function(e){var n=e.wsChannel,t=(0,s.useState)([]),u=(0,a.Z)(t,2),o=u[0],l=u[1];return(0,s.useEffect)((function(){null===n||void 0===n||n.addEventListener("message",(function(e){l((function(n){return[].concat((0,r.Z)(n),(0,r.Z)(JSON.parse(e.data)))}))}))}),[n]),(0,i.jsx)("div",{style:{height:"400px",overflowY:"auto"},children:o.map((function(e,n){return(0,i.jsx)(c,{message:e},n)}))})},l=t(1686),d=function(e){var n=e.wsChannel,t=(0,s.useState)(""),r=(0,a.Z)(t,2),u=r[0],c=r[1],o=(0,s.useState)("pending"),d=(0,a.Z)(o,2),f=d[0],h=d[1];(0,s.useEffect)((function(){null===n||void 0===n||n.addEventListener("open",(function(){h("ready")}))}),[n]);return(0,i.jsxs)("div",{children:[(0,i.jsx)("textarea",{onChange:function(e){return c(e.currentTarget.value)},value:u}),(0,i.jsx)("button",{disabled:"ready"!==f,onClick:function(){u&&(null===n||void 0===n||n.send(u),c(""))},children:(0,i.jsx)(l.Z,{})})]})},f=function(){var e=(0,s.useState)(null),n=(0,a.Z)(e,2),t=n[0],r=n[1];return(0,s.useEffect)((function(){r(new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"))}),[]),(0,s.useEffect)((function(){null===t||void 0===t||t.addEventListener("close",(function(){console.log("error")}))}),[t]),(0,i.jsxs)("div",{children:[(0,i.jsx)(o,{wsChannel:t}),(0,i.jsx)(d,{wsChannel:t})]})},h=function(){return(0,i.jsx)(f,{})}},1686:function(e,n,t){var s=t(4836);n.Z=void 0;var a=s(t(5649)),r=t(184),u=(0,a.default)((0,r.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");n.Z=u}}]);
//# sourceMappingURL=747.9b99a0c0.chunk.js.map